---
title: "Customer_segmentation_R_Markdown"
author: "Shazmin"
date: "2024-08-08"
output: html_document
---

options(repos = c(CRAN = "https://cran.rstudio.com/"))


Welcome to the exciting world of customer segmentation! We’re about to dig into data and find those hidden patterns and behaviors that everyone talks about but few actually understand. With MySQL for managing our data and R for making cool charts, we’re here to turn ordinary customer info into something useful.

## What is Customer segmentation?
Customer segmentation is the process by which you divide your customers up based on common characteristics – such as demographics or behaviors, so your marketing team or sales team can reach out to those customers more effectively. It’s like taking a big jumble of data and breaking it down into smaller, more meaningful chunks. This helps businesses stop sending the same old ads to everyone and start targeting their messages better.

### What is Target Audience?
A target audience refers to the specific group of consumers most likely to be interested in your product or business (e.g. selling directly to consumers versus B2B). That target audience can then be categorized into different segments based on similar traits they share.

## Why we need to segment Customer?
The days of “one-size-fits-all” marketing are long gone. Nowadays, if you send out generic messages, you risk losing up to 45% of your customers. That’s a big deal! So, customer segmentation is key to making sure you’re sending the right message to the right people at the right time.



I have worked with the Mall customers dataset, which you can download for free from Kaggle or access through my repository. There is an SQL script you can refer to for basic data exploration. Let's start with data visualization here:

## Installing Packages


```{r setup, include=FALSE}
options(repos = c(CRAN = "https://cran.rstudio.com/"))


install.packages("RMySQL")
install.packages("dplyr")
install.packages("ggplot2")
install.packages("cluster")
install.packages("factoextra")
install.packages("readr")

```

Don't worry! It takes a few seconds. Be with me :)

## Loading packages

```{r}
library(dplyr)
library(RMySQL)
library(ggplot2)
library(factoextra)
library(cluster)
library(readr)
```

## Setting Your environment

set up your working directory to the folder where your CSV files are saved
 
```{r}
setwd("C:/ProgramData/MySQL/MySQL Server 8.0/Data/mall_customers")
```

## Reading CSV file

```{r}
customer<- read_csv("mall_customers.csv")
head(customer)
```

# Visualization

## Gender Distribution:

```{r}
ggplot(customer , aes(x= Gender))+
  geom_bar(fill='skyblue')+
  labs(title = "Distribution of Customers by Gender", x = "Gender", y = "Count")

```

## Age Distribution:

```{r}
ggplot(customer, aes(x = Age)) +
  geom_histogram(binwidth = 2, fill = "orange") +
  labs(title = "Age Distribution of Customers", x = "Age", y = "Count")
```

## Income Distribution:

```{r}
customer <- customer %>%
  rename(SpendingScore = `Spending Score (1-100)`,
         AnnualIncome = `Annual Income (k$)`)
customer$SpendingScore <- as.numeric(customer$SpendingScore)
customer$AnnualIncome <- as.numeric(customer$AnnualIncome)

#Ensure that both SpendingScore and AnnualIncome are stored as numeric data types before plotting

ggplot(customer, aes(x = AnnualIncome)) +
  geom_histogram(binwidth = 5, fill = "pink", color = "black") +
  labs(title = "Annual Income Distribution", x = "Annual Income (k$)", y = "Count") +
  theme_minimal()
```

## Spending Score Distribution:

```{r}
ggplot(customer, aes(x = SpendingScore)) +
  geom_histogram(binwidth = 4, fill = "purple", color = "black") +
  labs(title = "Spending Score Distribution", x = "Spending Score", y = "Count") +
  theme_minimal()
```

## Correlation Between Income and Spending Score:

```{r}
ggplot(customer, aes(x = AnnualIncome, y = SpendingScore)) +
  geom_point(color = "blue") +
  labs(title = "Income vs Spending Score", x = "Annual Income (k$)", y = "Spending Score")

```

## Income vs. Age:

```{r}
ggplot(customer, aes(x = Age, y = AnnualIncome)) +
  geom_point(color = "red") +
  labs(title = "Age vs Annual Income", x = "Age", y = "Annual Income (k$)")

```

## Spending Score vs. Age:

```{r}
ggplot(customer , aes(x= Age , y =SpendingScore ))+
  geom_point(color="red")+
  labs(title = "AGE vs SpendingScore" , x= "Age" , y = "Annual Income")

```

## Segmentation Visualization :

```{r}
customer %>%
  mutate(Segment = case_when(
    AnnualIncome >= mean(AnnualIncome) & SpendingScore >= mean(SpendingScore) ~ "High Income, High Spending",
    AnnualIncome >= mean(AnnualIncome) & SpendingScore < mean(SpendingScore) ~ "High Income, Low Spending",
    AnnualIncome < mean(AnnualIncome) & SpendingScore >= mean(SpendingScore) ~ "Low Income, High Spending",
    TRUE ~ "Low Income, Low Spending"
  )) %>%
  ggplot(aes(x = Segment, fill = Segment)) +
  geom_bar() +
  labs(title = "Customer Segmentation", x = "Segment", y = "Count")+
  theme(axis.text.x = element_blank())
```

# Conclusion



---

The analysis of 200 customers reveals a gender distribution of 44% male and 56% female, with an average age of 38.85 years and a median age of 36. Customers have an average annual income of $60,560 and a median income of $62,000, with the most common income bracket at $52,000. Spending scores average 50.20, with a median of 50 and the most common score being 42. The correlation between income and spending score is minimal (0.01), indicating little relationship between the two. Segmentation shows 49 high-spending, 102 high-income, and 98 low-income customers, with 54 in the low-income, low-spending category and 49 in the high-income, low-spending category. No outliers were identified, suggesting a well-defined customer profile.

---